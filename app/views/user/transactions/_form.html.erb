<% if @transaction.errors.any? %>
  <div class="alert alert-danger">
    <ul>
      <% @transaction.errors.full_messages.each do |message| %>
        <li><%= message %><i class="far fa-times-circle"></i></li>
      <% end %>
    </ul>
  </div>
<% end %>

<form>
  <%= form_with model: [:user, @transaction], local: true do |invoice| %>
    
      <%= invoice_photo_tag transaction %>
    <div class="form-group">
      <%= invoice.label :invoice_photo, '發票截圖' %>
      <%= invoice.file_field :invoice_photo, class: 'form-control-file' %>
      <%# 發票圖片上傳 %>
    </div>
    <div class="form-group">
      <%= invoice.label :invoice_num, '發票號碼' %>
      <%= invoice.text_field :invoice_num %>
    </div>
    <div class="">
      <label>發票內容: </label>
      <%= invoice.fields_for :transaction_items do |item| %>
      <div class="form-group">
        <%= item.hidden_field :id %>
        <%= item.label :title, '品項名稱' %>
        <%= item.text_field :title %>
      </div>
      <div class="form-group">
        <%= item.label :quantity, '品項數量' %>
        <%= item.text_field :quantity %>
      </div>
      <div class="form-group">
        <%= item.label :price, '品項單價' %>
        <%= item.text_field :price %>
      </div>
      <div class="form-group">
        <%= item.label :total, '品項總價' %>
        <%= item.text_field :total %>
      </div>
      <% end %>
    </div>
    <div class="form-group">
      <%= invoice.label :amount, '發票總價' %>
      <%= invoice.text_field :amount %>
    </div>
    <div class="form-group">
      <%= invoice.label :status, '對獎狀態' %>
      <%= invoice.text_field :status %>
    </div>
    
      <%= invoice.submit '儲存', class: 'btn btn-primary' %>
    
    </div>
  <% end %>
</form>
